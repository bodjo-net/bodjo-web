{"version":3,"sources":["Components/Link/Link.jsx","Components/Button/Button.jsx","Components/Loading/Loading.jsx","Controllers/DialogController.js","Controllers/APIController.js","Controllers/StorageController.js","Controllers/AccountController.js","Pages/Index/GamesList/GamesList.jsx","Pages/Index/NewsList/NewsList.jsx","Pages/Index/Index.jsx","Components/Input/Input.jsx","Pages/LoginPage/LoginPage.jsx","Pages/RegisterPage/RegisterPage.jsx","Controllers/UserInfoController.js","Components/Textarea/Textarea.jsx","Pages/MyAccount/MyAccount.jsx","Pages/News/News.jsx","Pages/Scoreboard/Scoreboard.jsx","Components/User/User.jsx","Parts/Header/Auth.jsx","Parts/Header/Header.jsx","Parts/Footer/Footer.jsx","App.jsx","index.js"],"names":["links","_Link","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","__to","to","Array","isArray","push","assertThisInitialized","_this2","index","findIndex","link","splice","current","window","location","pathname","dest","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","forceUpdate","err","return","indexOf","react_default","a","createElement","href","className","children","react_router_dom","onClick","bind","React","Component","Button","enterHandler","onEnter","disabled","element","event","rect","getBoundingClientRect","x","clientX","left","y","clientY","top","R","Math","max","sqrt","pow","width","height","ripple","document","style","position","transition","borderRadius","opacity","id","Date","now","setTimeout","append","ripples","querySelectorAll","_loop","i","start","parseInt","substring","remove","length","ReactDOM","findDOMNode","overflow","down","_down","up","_up","addEventListener","body","enter","removeEventListener","keyCode","classes","split","join","invert","redirect","Loading_Loading","inline","faces","randomFace","round","random","zindex","showDialog","header","content","code","dialog","zIndex","dialogContent","h1","innerText","appendChild","h2","p","span","API","SERVER_HOST","__query","__init","GET","status","hostname","forEach","args","apply","slice","url","data","cb","tryToParse","xhr","XMLHttpRequest","isAPIRequest","censoredURL","concat","prototype","arguments","keys","map","key","encodeURIComponent","console","log","open","send","onreadystatechange","readyState","responseText","JSON","parse","e","getAllResponseHeaders","statusText","error","statusCode","POST","before","Storage","get","name","o","getCookie","localStorage","getItem","setItem","setCookie","domain","set","v","stringify","max-age","deleteCookie","removeItem","matches","cookie","match","RegExp","replace","decodeURIComponent","options","objectSpread","path","updatedCookie","optionKey","optionValue","AccountController","EMAIL_REGEX","__listeners","token","storage","username","loading","verified","check","callback","listener","password","emit","errParameter","email","file","ext","image/png","image/jpeg","image/jpg","image/gif","type","req","formData","FormData","_this3","about","_this4","account","GamesList","gameServers","state","self","obtain","component","isMounted","games","servers","server","gameServer","GameServer","info","setState","__gamesListCache","roptions","serverName","destroy","game","gameName","serversContent","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","players","ping","toFixed","Components_Button_Button","Components_Link_Link","backgroundImage","src","onUpdate","host","apihost","pings","pingValue","pingTimeout","clearTimeout","loadInfo","pingEach","playersCount","maxPlayersCount","update","wasStatus","timestamp","end","middle","isNaN","reduce","b","n","pagesCount","NewsList","news","pages","newsPiece","html","parseBodjoPage","preview","newState","newsTotal","total","__newsListCache","q","order","count","page","dangerouslySetInnerHTML","__html","IndexPage","loadBodjoPage","signature","cache","Index_GamesList_GamesList","Index_NewsList_NewsList","Input","hasError","input","placeholder","onChange","onKeyUp","defaultValue","LoginPage","usernameInput","createRef","passwordInput","on","login","errCode","react_router","Components_Input_Input","ref","onSubmit","RegisterPage","repeatPasswordInput","emailInput","passwordRepeat","test","register","UserInfo","__callbacks","__lastQueryAppend","load","lastQueryAppend","usernames","_username","result","my","Textarea","querySelector","textarea","rootdiv","TIME_RANGES","string","digit","MyAccountPage","submitButton","aboutInput","_ismounted","logout","edit","persist","target","files","uploadImage","image","imaget","alert","errText","setDisabled","min","timeString","d","floor","getTimeString","handleImageUpload","accept","Components_Textarea_Textarea","handleEdit","handleLogout","NewsPage","ScoreboardPage","User","me","Auth","Components_User_User","Header","Header_Auth","Footer","App","Header_Header","exact","Index","Footer_Footer","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.a77bd504.chunk.js","sourcesContent":["import React from 'react';\nimport { Link } from \"react-router-dom\";\nimport './Link.css';\n\nlet links = {}\nclass _Link extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.__to = props.to;\n\t\tif (!Array.isArray(links[props.to]))\n\t\t\tlinks[props.to] = [];\n\t\tlinks[props.to].push(this);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tlet index = links[this.props.to].findIndex(link => link == this);\n\t\tif (index >= 0)\n\t\t\tlinks[this.props.to].splice(index, 1);\n\t}\n\n\tonClick(to) {\n\t\tlet current = window.location.pathname;\n\t\tfor (let dest in links) {\n\t\t\tif (dest == current || dest == to) {\n\t\t\t\tfor (let link of links[dest])\n\t\t\t\t\tlink.forceUpdate();\n\t\t\t}\n\t\t}\n\t\tthis.__to = to;\n\t}\n\n\trender() {\n\t\tif (this.props.to.indexOf('\\/\\/') == 0 ||\n\t\t\tthis.props.to.indexOf('http:\\/\\/') == 0 ||\n\t\t\tthis.props.to.indexOf('https:\\/\\/') == 0)\n\t\t\treturn <a href={this.props.to} className={(this.props.className||'')+' link'}>{this.props.children}</a>;\n\n\t\treturn <Link \n\t\t\t\t\tto={this.props.to} \n\t\t\t\t\tonClick={this.onClick.bind(this, this.props.to)}\n\t\t\t\t\tclassName={'link '+(this.props.className||'')+\n\t\t\t\t\t\t\t   ((window.location.pathname == this.props.to ||\n\t\t\t\t\t\t\t\t window.location.pathname == this.__to) ? ' active' : '')}>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</Link>;\n\t}\n}\n\nexport default _Link;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './Button.css';\n\nclass Button extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.enterHandler = this.onEnter.bind(this);\n\t\tthis.disabled = props.disabled || false;\n\t}\n\t\n\t_down(element, event) {\n\t\tif (this.disabled)\n\t\t\treturn;\n\t\tlet rect = element.getBoundingClientRect();\n\t\tlet x = (event.clientX - rect.left), y = (event.clientY - rect.top);\n\t\tlet R = Math.max(\n\t\t\t\t\tMath.sqrt(Math.pow(x, 2) + Math.pow(y, 2)),\n\t\t\t\t\tMath.sqrt(Math.pow(x-rect.width, 2) + Math.pow(y, 2)),\n\t\t\t\t\tMath.sqrt(Math.pow(x, 2) + Math.pow(y-rect.height, 2)),\n\t\t\t\t\tMath.sqrt(Math.pow(x-rect.width, 2) + Math.pow(y-rect.height, 2))\n\t\t\t\t);\n\n\t\tlet ripple = document.createElement('div');\n\t\tripple.className = 'ripple';\n\t\tripple.style.position = 'absolute';\n\t\tripple.style.transition = 'all 0.25s cubic-bezier(0.215, 0.61, 0.355, 1)';\n\t\tripple.style.borderRadius = '50%';\n\t\tripple.style.opacity = '1';\n\t\tripple.style.top = y + \"px\";\n\t\tripple.style.left = x + \"px\";\n\t\tripple.style.width = ripple.style.height = '0px';\n\t\tripple.id = 's' + Date.now();\n\t\tsetTimeout(function () {\n\t\t\tripple.style.opacity = '0.75';\n\t\t\tripple.style.top = (y-R) + \"px\";\n\t\t\tripple.style.left = (x-R) + \"px\";\n\t\t\tripple.style.width = ripple.style.height = R*2 + 'px';\n\t\t}, 10);\n\n\t\telement.append(ripple);\n\t}\n\t_up(element, event) {\n\t\tlet ripples = element.querySelectorAll('.ripple');\n\t\tif (ripples == null)\n\t\t\treturn;\n\n\t\tfor (let i = 0; i < ripples.length; ++i) {\n\t\t\tlet ripple = ripples[i];\n\t\t\tlet start = parseInt(ripple.id.substring(1));\n\t\t\tif (Date.now() - start > 250) {\n\t\t\t\tripple.style.opacity = '0';\n\t\t\t\tsetTimeout(ripple.remove.bind(ripple), 250);\n\t\t\t} else {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tripple.style.opacity = '0';\n\t\t\t\t\tsetTimeout(ripple.remove.bind(ripple), 250);\n\t\t\t\t}, 250 - (Date.now() - start))\n\t\t\t}\n\t\t}\n\t}\n\n\n\tcomponentDidMount() {\n\t\tlet element = ReactDOM.findDOMNode(this);\n\t\telement.style.position = 'relative';\n\t\telement.style.overflow = 'hidden';\n\n\t\tthis.down = this._down.bind(this, element);\n\t\tthis.up = this._up.bind(this, element);\n\t\telement.addEventListener('mousedown', this.down);\n\t\tdocument.body.addEventListener('mouseup', this.up);\n\t}\n\tcomponentWillMount() {\n\t\tif (this.props.enter)\n\t\t\twindow.addEventListener('keyup', this.enterHandler);\n\t}\n\tcomponentWillUnmount() {\n\t\tif (this.props.enter)\n\t\t\twindow.removeEventListener('keyup', this.enterHandler);\n\n\t\tdocument.body.removeEventListener('mouseup', this.up);\n\t}\n\n\tonEnter(event) {\n\t\tif (event.keyCode == 13) {\n\t\t\tif (typeof this.props.onClick === 'function')\n\t\t\t\tthis.props.onClick();\n\t\t}\n\t}\t\n\n\tsetDisabled(value) {\n\t\tthis.disabled = value;\n\t\tlet element = ReactDOM.findDOMNode(this);\n\t\tlet classes = element.className.split(' ');\n\t\tif (value && classes.indexOf('disabled') < 0)\n\t\t\tclasses.push('disabled');\n\t\telse if (!value) {\n\t\t\twhile (classes.indexOf('disabled') >= 0)\n\t\t\t\tclasses.splice(classes.indexOf('disabled'), 1);\n\t\t}\n\t\telement.className = classes.join(' ');\n\t}\n\n\tredirect(to) {\n\t\twindow.location.href = to;\n\t}\n\n\trender() {\n\t\tlet className = this.props.className || '';\n\t\tif (this.props.invert)\n\t\t\tclassName += ' invert';\n\t\tif (this.disabled || this.props.disabled) {\n\t\t\tthis.disabled = this.props.disabled;\n\t\t\tclassName += ' disabled';\n\t\t}\n\t\treturn ( \n\t\t\t<div className={className+' button'} \n\t\t\t\t id={this.props.id} \n\t\t\t\t onClick={this.props.to ? this.redirect.bind(this, this.props.to) : this.props.onClick}>\n\t\t\t\t {this.props.children}\n\t\t\t</div> \n\t\t);\n\t}\n}\n\nexport default Button;","import React from 'react';\nimport './Loading.css';\nexport default function (props) {\n\treturn <div className={(props.inline?'inline ':'')+'loader'}></div>\n}","import './Dialog.css';\n\nwindow.faces = [\n  \"\\\\(o_o)/\",\n  \"(ノಠ益ಠ)ノ彡┻━┻\",\n  \"(╯°□°）╯︵ ┻━┻\",\n  \"ヽ(`Д´)ﾉ\",\n  \"ノ( º _ ºノ)\",\n  \"¬_¬\",\n  \"¯(°_o)/¯\",\n  \"¯\\\\_(ツ)_/¯\",\n  \"°Д°\",\n  \"( ︶︿︶)\",\n  \"( .-. )\",\n  \"( .o.)\"\n];\n\nwindow.randomFace = function () {\n\treturn window.faces[Math.round(Math.random()*(window.faces.length-1))];\n}\n\nlet zindex = 100500;\nwindow.showDialog = function (header, content, code) {\n\tlet dialog = document.createElement('div');\n\tdialog.className = \"dialog\";\n\tdialog.style.zIndex = zindex++;\n\n\tlet dialogContent = document.createElement('div');\n\tdialogContent.className = \"dialog-content\";\n\n\tlet h1 = document.createElement('h1');\n\th1.innerText = window.randomFace();\n\tdialogContent.appendChild(h1);\n\n\tlet h2 = document.createElement('h2');\n\th2.innerText = header;\n\tdialogContent.appendChild(h2);\n\n\tlet p = document.createElement('p');\n\tp.innerText = content;\n\tdialogContent.appendChild(p);\n\n\tlet span = document.createElement('span');\n\tspan.innerText = code;\n\tdialogContent.appendChild(span);\n\n\tdialog.appendChild(dialogContent);\n\n\tdocument.body.appendChild(dialog);\n\tdocument.body.style.overflow = 'hidden';\n}","import './DialogController.js';\n\nlet SERVER_HOST = null;\n\nlet API = {\n\tSERVER_HOST: null,\n\t__query: [],\n\t__init: function () {\n\t\tAPI.GET('https://bodjo.net/SERVER_HOST', (status, hostname) => {\n\t\t\tif (status) {\n\t\t\t\tAPI.SERVER_HOST = hostname;\n\t\t\t\tif (API.__query.length > 0) {\n\t\t\t\t\tAPI.__query.forEach(args => API[args[0]].apply(API, args.slice(1)));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twindow.showDialog('Obtaining main server hostname error.', 'https://bodjo.net\\nGET /SERVER_HOST/', 'ERR_SERVER_HOST_MISSING')\n\t\t\t}\n\t\t});\n\t},\n\tGET: function (url, data, cb, tryToParse) {\n\t\tif (typeof data !== 'object') {\n\t\t\ttryToParse = cb || true;\n\t\t\tcb = data;\n\t\t}\n\t\tif (typeof tryToParse === 'undefined')\n\t\t\ttryToParse = true;\n\t\tlet xhr = new XMLHttpRequest();\n\t\tlet isAPIRequest = false;\n\t\tlet censoredURL = url;\n\t\tif (typeof data === 'object') {\n\t\t\tif (API.SERVER_HOST == null) {\n\t\t\t\tAPI.__query.push(['GET'].concat(Array.prototype.slice.apply(arguments)));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tisAPIRequest = true;\n\t\t\turl = API.SERVER_HOST + url + '?' + Object.keys(data).map(key => key + '=' + encodeURIComponent(data[key])).join('&');\n\t\t\tcensoredURL = API.SERVER_HOST + url + '?' + Object.keys(data).map(key => key + '=' + (key=='token'||key=='password'?'<'+key+'>':encodeURIComponent(data[key]))).join('&');\n\t\t}\n\t\tconsole.log('[API] GET ' + url);\n\t\txhr.open('GET', url, true);\n\t\txhr.send();\n\t\txhr.onreadystatechange = function () {\n\t\t\tif (xhr.readyState !== 4) return;\n\n\t\t\tif (xhr.status == 200) {\n\t\t\t\tlet data = xhr.responseText;\n\t\t\t\tif (tryToParse) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t\t} catch (e) {}\n\t\t\t\t}\n\t\t\t\tcb(true, data);\n\t\t\t} else {\n\t\t\t\tif (isAPIRequest) {\n\t\t\t\t\twindow.showDialog('Bad API Response', 'Received bad HTTP response:\\n\\nGET ' + censoredURL + '\\n'+xhr.getAllResponseHeaders()+'\\n\\n'+xhr.statusText, 'ERR_BAD_API_REQUEST')\n\t\t\t\t}\n\n\t\t\t\tconsole.error('Bad HTTP Response: ' + xhr.statusCode + \" - \" + xhr.statusText);\n\t\t\t\tcb(false, xhr);\n\t\t\t}\n\n\t\t}\n\t},\n\tPOST: function (url, data, before, cb, tryToParse) {\n\t\tif (typeof data !== 'object') {\n\t\t\ttryToParse = cb || true;\n\t\t\tcb = before;\n\t\t\tbefore = data;\n\t\t}\n\t\tif (typeof tryToParse === 'undefined')\n\t\t\ttryToParse = true;\n\t\tlet xhr = new XMLHttpRequest();\n\t\tlet isAPIRequest = false;\n\t\tlet censoredURL = url;\n\t\tif (typeof data === 'object') {\n\t\t\tif (API.SERVER_HOST == null) {\n\t\t\t\tAPI.__query.push(['POST'].concat(Array.prototype.slice.apply(arguments)));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tisAPIRequest = true;\n\n\t\t\turl = API.SERVER_HOST + url + '?' + Object.keys(data).map(key => key + '=' + encodeURIComponent(data[key])).join('&');\n\t\t\tcensoredURL = API.SERVER_HOST + url + '?' + Object.keys(data).map(key => key + '=' + (key=='token'||key=='password'?'<'+key+'>':encodeURIComponent(data[key]))).join('&');\n\t\t}\n\t\tconsole.log('[API] POST ' + url);\n\t\txhr.open('POST', url, true);\n\t\tbefore(xhr);\n\t\txhr.onreadystatechange = function () {\n\t\t\tif (xhr.readyState !== 4) return;\n\n\t\t\tif (xhr.status == 200) {\n\t\t\t\tlet data = xhr.responseText;\n\t\t\t\tif (tryToParse) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t\t} catch (e) {}\n\t\t\t\t}\n\t\t\t\tcb(true, data);\n\t\t\t} else {\n\t\t\t\tif (isAPIRequest) {\n\t\t\t\t\twindow.showDialog('Bad API Response', 'Received bad HTTP response:\\n\\nGET ' + censoredURL + '\\n'+xhr.getAllResponseHeaders()+'\\n\\n'+xhr.statusText, 'ERR_BAD_API_REQUEST')\n\t\t\t\t}\n\n\t\t\t\tconsole.error('Bad HTTP Response: ' + xhr.statusCode + \" - \" + xhr.statusText);\n\t\t\t\tcb(false, xhr);\n\t\t\t}\n\t\t}\n\t}\n};\nAPI.__init();\nwindow.API = API;\n\nexport default API;","const domain = 'bodjo.net';\nlet Storage = {\n\tget: function (name) {\n\t\tlet o = null;\n\t\tif (getCookie(name)) {\n\t\t\to = getCookie(name);\n\t\t\tif (typeof localStorage.getItem(name) === 'undefined')\n\t\t\t\tlocalStorage.setItem(name, o);\n\t\t} else if (localStorage.getItem(name)) {\n\t\t\to = localStorage.getItem(name);\n\t\t\tsetCookie(name, o);\n\t\t\tsetCookie(name, o, {domain});\n\t\t}\n\t\tif (o != null) {\n\t\t\ttry {\n\t\t\t\to = JSON.parse(o)\n\t\t\t} catch (e) {}\n\t\t}\n\t\treturn o;\n\t},\n\tset: function (name, value) {\n\t\tlet v = JSON.stringify(value);\n\t\tlocalStorage.setItem(name, v);\n\t\tsetCookie(name, v);\n\t\tsetCookie(name, v, {domain});\n\t},\n\tremove: function (name) {\n\t\tdeleteCookie(name);\n\t\tlocalStorage.removeItem(name);\n\t}\n};\nwindow.Storage = Storage;\n\n// cookies (thanks to https://learn.javascript.ru/cookie)\nfunction getCookie(name) {\n  let matches = document.cookie.match(new RegExp(\n    \"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\n  ));\n  return matches ? decodeURIComponent(matches[1]) : undefined;\n}\nfunction setCookie(name, value, options) {\n  options = {\n    path: '/',\n    ...options\n  }\n\n  let updatedCookie = encodeURIComponent(name) + \"=\" + encodeURIComponent(value);\n\n  for (let optionKey in options) {\n    updatedCookie += \"; \" + optionKey;\n    let optionValue = options[optionKey];\n    if (optionValue !== true)\n      updatedCookie += \"=\" + optionValue;\n  }\n\n  document.cookie = updatedCookie;\n}\nfunction deleteCookie(name) {\n  setCookie(name, \"\", {\n    'max-age': -1\n  })\n}\n\n\nexport default Storage;","import API from './APIController';\nimport storage from './StorageController';\n\nconst strictSymbols = \"1234567890qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM_-\";\n\nclass AccountController {\n\tconstructor() {\n\t\tthis.EMAIL_REGEX = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t\tthis.__listeners = {};\n\n\t\tthis.token = storage.get('bodjo-token');\n\t\tthis.username = storage.get('bodjo-username');\n\t\tthis.loading = false;\n\t\tthis.verified = false;\n\t\tif (this.token != null &&\n\t\t\ttypeof this.token === 'string') {\n\t\t\tthis.check();\n\t\t}\n\t}\n\ton(name, callback) {\n\t\tif (typeof this.__listeners[name] === 'undefined')\n\t\t\tthis.__listeners[name] = [];\n\t\tthis.__listeners[name].push(callback);\n\t}\n\temit(name) {\n\t\tif (typeof this.__listeners[name] === 'undefined')\n\t\t\treturn;\n\t\tlet args = Array.prototype.slice.apply(arguments).slice(1);\n\t\tfor (let listener of this.__listeners[name])\n\t\t\tlistener.apply(listener, args);\n\t}\n\n\tlogin(username, password, callback) {\n\t\tthis.loading = true;\n\t\tthis.emit('checking');\n\t\tAPI.GET('/account/login', {username, password}, (status, data) => {\n\t\t\tthis.loading = false;\n\t\t\tthis.verified = (status && data.status === 'ok');\n\t\t\tif (this.verified) {\n\t\t\t\tthis.token = data.token.value;\n\t\t\t\tthis.username = username;\n\t\t\t\tstorage.set('bodjo-token', this.token);\n\t\t\t\tstorage.set('bodjo-username', this.username);\n\t\t\t}\n\n\t\t\tthis.emit('checked', this.verified);\n\t\t\tcallback(this.verified, data.errParameter, data);\n\t\t});\n\t}\n\n\tregister(username, password, email, callback) {\n\t\tthis.loading = true;\n\t\tthis.emit('checking');\n\t\tlet data = {username, password};\n\t\tif (typeof email !== 'undefined' &&\n\t\t\temail.length > 0)\n\t\t\tdata.email = email;\n\t\tAPI.GET('/account/register', data, (status, data) => {\n\t\t\tthis.loading = false;\n\t\t\tthis.verified = (status && data.status === 'ok');\n\t\t\tif (this.verified) {\n\t\t\t\tthis.token = data.token.value;\n\t\t\t\tthis.username = data.token.username;\n\t\t\t\tstorage.set('bodjo-token', this.token);\n\t\t\t\tstorage.set('bodjo-username', this.username);\n\t\t\t}\n\n\t\t\tthis.emit('checked', this.verified);\n\t\t\tcallback(this.verified, data.errParameter, data);\n\t\t})\n\t}\n\tuploadImage(file, callback) {\n\t\tif (!this.verified)\n\t\t\treturn;\n\t\tconst exts = {\n\t\t\t'image/png': 'png',\n\t\t\t'image/jpeg': 'jpeg',\n\t\t\t'image/jpg': 'jpg',\n\t\t\t'image/gif': 'gif'\n\t\t};\n\n\t\tAPI.POST('/account/uploadImage', {\n\t\t\ttoken: this.token,\n\t\t\text: exts[file.type]\n\t\t}, (req) => {\n\t\t\t// req.setRequestHeader('Content-Type', 'multipart/form-data');\n\t\t\tlet formData = new FormData();\n\t\t\tformData.append('image', file);\n\t\t\treq.send(formData)\n\t\t}, (status, data) => {\n\t\t\tcallback(status && data.status == 'ok', data);\n\t\t})\n\t}\n\n\tlogout() {\n\t\tif (this.token && this.verified) {\n\t\t\tthis.loading = true;\n\t\t\tAPI.GET('/account/logout', {token: this.token}, (status, data) => {\n\t\t\t\tthis.loading = false;\n\t\t\t\tthis.token = null;\n\t\t\t\tthis.verified = false;\n\t\t\t\tif (status && data.status == 'ok') {\n\t\t\t\t\tconsole.log('token removed successfully')\n\t\t\t\t}\n\n\t\t\t\tthis.emit('checked', this.verified);\n\t\t\t})\n\t\t}\n\n\t\tstorage.remove('bodjo-token');\n\t\tstorage.remove('bodjo-username');\n\t}\n\n\tedit(email, about, callback) {\n\t\tlet o = {token: this.token};\n\t\tif (email.length > 0) o.email = email;\n\t\tif (about.length > 0) o.about = about;\n\t\tAPI.GET('/account/edit', o, (status, data) => {\n\t\t\tcallback(status && data.status === 'ok');\n\t\t});\n\t}\n\n\tcheck() {\n\t\tthis.loading = true;\n\t\tthis.emit('checking');\n\t\tAPI.GET('/account/check', {token: this.token}, (status, data) => {\n\t\t\tthis.loading = false;\n\t\t\tthis.verified = (status && data.status === 'ok');\n\t\t\tif (data.token && data.token.username)\n\t\t\t\tthis.username = data.token.username;\n\n\t\t\tif (this.verified) {\n\t\t\t\tstorage.set('bodjo-token', this.token);\n\t\t\t\tstorage.set('bodjo-username', this.username);\n\t\t\t}\n\n\t\t\tthis.emit('checked', this.verified);\n\t\t});\n\t}\n}\nexport default (window.account = new AccountController());","import React from 'react';\nimport Link from './../../../Components/Link/Link';\nimport Button from './../../../Components/Button/Button';\nimport Loading from './../../../Components/Loading/Loading';\nimport API from './../../../Controllers/APIController';\nimport account from './../../../Controllers/AccountController';\n\nimport './GamesList.css';\n\nclass GamesList extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.gameServers = {};\n\t\tthis.state = {loading: true};\n\n\t\tlet self = this;\n\t\tfunction obtain(component, isMounted, data) {\n\t\t\tlet games = {};\n\t\t\tfor (let server of data.servers) {\n\t\t\t\tlet gameServer = \n\t\t\t\t\t\tself.gameServers[server.name] = \n\t\t\t\t\t\tnew GameServer(server, (info) => {\n\t\t\t\t\t\t\tlet o = {}; o[info.name] = info;\n\t\t\t\t\t\t\tself.setState(o);\n\t\t\t\t\t\t});\n\t\t\t\tgameServer.obtain();\n\t\t\t\tgames[server.name] = gameServer.info();\n\t\t\t}\n\t\t\tgames.loading = false;\n\t\t\tif (isMounted)\n\t\t\t\tcomponent.setState(games);\n\t\t\telse component.state = games;\n\t\t}\n\t\tif (window.__gamesListCache) {\n\t\t\tobtain(this, false, window.__gamesListCache);\n\t\t} else {\n\t\t\tlet roptions = {};\n\t\t\tif (account.token && account.verified)\n\t\t\t\troptions.token = account.token;\n\t\t\tAPI.GET('/games/info', roptions, (status, data) => {\n\t\t\t\tif (status && data.status === 'ok') {\n\t\t\t\t\tobtain(this, true, data);\n\t\t\t\t\twindow.__gamesListCache = data;\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tfor (let serverName in this.gameServers)\n\t\t\tthis.gameServers[serverName].destroy();\n\t\tthis.state = {};\n\t}\n\n\trender() {\n\t\tlet content = [];\n\n\t\tif (!this.state.loading) {\n\t\t\tlet games = {};\n\t\t\tfor (let serverName in this.state) {\n\t\t\t\tif (serverName == 'loading') continue;\n\t\t\t\tlet game = this.state[serverName].game;\n\t\t\t\tif (typeof games[game] === 'undefined')\n\t\t\t\t\tgames[game] = [];\n\t\t\t\tgames[game].push(this.state[serverName]);\n\t\t\t}\n\n\t\t\tfor (let gameName in games) {\n\t\t\t\tlet serversContent = [];\n\t\t\t\tfor (let server of games[gameName]) {\n\t\t\t\t\tserversContent.push(\n\t\t\t\t\t\t<div className=\"game-server\" key={server.name}>\n\t\t\t\t\t\t\t<div className=\"info\">\n\t\t\t\t\t\t\t\t<span className={'status ' + (server.status?'enabled':'disabled')} /> \n\t\t\t\t\t\t\t\t<span className=\"players-count\">{\n\t\t\t\t\t\t\t\t\tserver.status ? \n\t\t\t\t\t\t\t\t\t(<span>[<b>{server.players.value}</b>/{server.players.max}]</span>) :\n\t\t\t\t\t\t\t\t\t(<span>[<b className=\"loading\"><span>-/|\\</span></b>]</span>)\n\t\t\t\t\t\t\t\t}</span>\n\t\t\t\t\t\t\t\t<span className=\"name\">{server.name}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className={\"go\"+(!account.verified?\" disabled\":\"\")}>\n\t\t\t\t\t\t\t\t<span className=\"ping\">{(server.ping||0).toFixed(2)}ms</span>\n\t\t\t\t\t\t\t\t<Button disabled={!server.status || !account.verified} invert to={server.link}>Играть</Button>\n\t\t\t\t\t\t\t\t<span className=\"label\">нужно <Link to=\"/login/\">войти</Link></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tcontent.push(\n\t\t\t\t\t<div className=\"game\" key={gameName} style={{backgroundImage: 'url(assets/games/'+gameName+'/bg.png)'}}>\n\t\t\t\t\t\t<h3>{gameName}</h3>\n\t\t\t\t\t\t{serversContent}\n\t\t\t\t\t\t<div className=\"grey\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (content.length == 0) {\n\t\t\tcontent.push(\n\t\t\t\t<div className=\"no-games\" key=\"no-games\">\n\t\t\t\t\t<h3>{window.randomFace()}</h3>\n\t\t\t\t\t<span>все сломалось! где игрыы?</span>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"section games\">\n\t\t\t\t<h2><img src='/assets/games.png' />Игры</h2>\n\t\t\t\t{this.state.loading ? <Loading /> : content}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass GameServer {\n\tconstructor(info, onUpdate) {\n\t\tthis.onUpdate = onUpdate;\n\t\tthis.host = info.host;\n\t\tthis.apihost = info.apihost;\n\t\tthis.name = info.name;\n\t\tthis.game = info.game;\n\t\tthis.status = false;\n\t\tthis.link = info.host;\n\t\tif (this.link.indexOf('http:\\/\\/') < 0 &&\n\t\t\tthis.link.indexOf('https:\\/\\/') < 0)\n\t\t\tthis.link = 'http:\\/\\/' + this.link;\n\t\tthis.loading = true;\n\n\t\tthis.pings = [];\n\t\tthis.pingValue = null;\n\n\t\tthis.players = {value: 0, max: 0}\n\t}\n\n\tupdate() {\n\t\tthis.onUpdate(this.info())\n\t}\n\n\tinfo() {\n\t\treturn {\n\t\t\tname: this.name,\n\t\t\tgame: this.game,\n\t\t\thost: this.host,\n\t\t\tlink: this.link,\n\t\t\tping: this.pingValue,\n\t\t\tstatus: this.status,\n\t\t\tplayers: this.players\n\t\t};\n\t}\n\n\tdestroy() {\n\t\tif (this.pingTimeout)\n\t\t\tclearTimeout(this.pingTimeout);\n\t}\n\n\tobtain() {\n\t\tthis.loadInfo();\n\t\tthis.pingEach(10);\n\t}\n\n\tloadInfo(callback) {\n\t\tAPI.GET(this.apihost+'/status', (status, data) => {\n\t\t\tif (status) {\n\t\t\t\tthis.players.value = data.playersCount;\n\t\t\t\tthis.players.max = data.maxPlayersCount;\n\t\t\t\tthis.loading = false;\n\t\t\t\tthis.status = true;\n\t\t\t\tthis.update();\n\t\t\t} else {\n\t\t\t\tlet wasStatus = this.status;\n\t\t\t\tthis.status = false;\n\t\t\t\tif (wasStatus != this.status)\n\t\t\t\t\tthis.update();\n\t\t\t}\n\n\t\t\tif (typeof callback === 'function')\n\t\t\t\tcallback();\n\t\t});\n\t}\n\n\tping (callback) {\n\t\tlet start = Date.now();\n\t\tAPI.GET(this.apihost+'/ping', (status, timestamp) => {\n\t\t\tlet end = Date.now(), middle = parseInt(timestamp);\n\t\t\tif (status && !isNaN(middle)) {\n\t\t\t\tthis.pings.push(end-start);\n\t\t\t\tthis.pingValue = this.pings.reduce((a,b)=>a+b) / this.pings.length;\n\t\t\t\tthis.status = true;\n\t\t\t\tthis.update();\n\t\t\t} else {\n\t\t\t\tlet wasStatus = this.status;\n\t\t\t\tthis.status = false;\n\t\t\t\tif (wasStatus != this.status)\n\t\t\t\t\tthis.update();\n\t\t\t}\n\n\t\t\tif (typeof callback === 'function')\n\t\t\t\tcallback();\n\t\t}, false);\n\t}\n\n\tpingEach(n, i = 0) {\n\t\tif (i == n)\n\t\t\treturn;\n\n\t\tthis.ping(() => {\n\t\t\tthis.pingTimeout = setTimeout(this.pingEach.bind(this, n, i+1), 1000*i);\n\t\t});\n\t}\n}\n\nexport default GamesList;","import React from 'react';\nimport Loading from './../../../Components/Loading/Loading';\nimport Link from './../../../Components/Link/Link';\nimport API from './../../../Controllers/APIController';\nimport './NewsList.css';\n\nconst pagesCount = 2;\n\nclass NewsList extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {news: [], newsTotal: 0, loading: true};\n\n\t\tfunction obtain(component, isMounted, data) {\n\t\t\tfunction more(page) {\n\t\t\t\treturn '<span class=\"closer\"></span><a class=\"link more\" href=\"https://pages.bodjo.net/#'+page.id+'\">Подробнее...</a>';\n\t\t\t}\n\t\t\tlet news = data.pages;\n\t\t\tfor (let newsPiece of news)\n\t\t\t\tnewsPiece.html = window.parseBodjoPage(newsPiece.preview) + more(newsPiece);\n\t\t\tlet newState = {\n\t\t\t\tnews: news,\n\t\t\t\tnewsTotal: data.total,\n\t\t\t\tloading: false\n\t\t\t};\n\t\t\tif (isMounted)\n\t\t\t\tcomponent.setState(newState);\n\t\t\telse component.state = newState;\n\t\t}\n\n\t\tif (window.__newsListCache) {\n\t\t\tobtain(this, false, window.__newsListCache)\n\t\t} else {\t\n\t\t\tAPI.GET('/pages/search', {q: 'news.', preview: 1, order: false, count: pagesCount}, (status, data) => {\n\t\t\t\tif (status && data.status === 'ok') {\n\t\t\t\t\tobtain(this, true, data);\n\t\t\t\t\twindow.__newsListCache = data;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"section news\">\n\t\t\t\t<h2><img src='/assets/news.png' />Новости</h2>\n\t\t\t\t{this.state.loading ? <Loading /> :\n\t\t\t\t\t[\n\t\t\t\t\t\tthis.state.news.map(page => <div key={page.id} className='news-piece bodjo-page' dangerouslySetInnerHTML={{__html:page.html}}></div>),\n\t\t\t\t\t\t(this.state.newsTotal > pagesCount ? <Link to=\"/news/\">Больше новостей...</Link> : '')\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default NewsList;","import React from 'react';\nimport GamesList from './GamesList/GamesList';\nimport NewsList from './NewsList/NewsList';\nimport './Index.css';\n\nclass IndexPage extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t}\n\n\n\trender() {\n\t\tsetTimeout(window.loadBodjoPage.bind(null, 'main.about.ru', '#index .whatisit', {\n\t\t\tsignature: false,\n\t\t\tcache: true\n\t\t}), 1);\n\n\n\t\treturn (\n\t\t\t<div id=\"index\">\n\t\t\t\t<div className=\"left\">\n\t\t\t\t\t<div className=\"section whatisit\"></div>\n\t\t\t\t\t<GamesList />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"right\">\n\t\t\t\t\t<NewsList />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\nexport default IndexPage;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './Input.css';\n\nclass Input extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.hasError = false;\n\t}\n\tvalue() {\n\t\tlet input = ReactDOM.findDOMNode(this);\n\t\treturn input.value;\n\t}\n\terror() {\n\t\tlet input = ReactDOM.findDOMNode(this);\n\t\tif (this.hasError)\n\t\t\treturn;\n\n\t\tthis.hasError = true;\n\t\tinput.className = (this.props.className||'') + ' error';\n\t\tsetTimeout(() => {\n\t\t\tinput.className = (this.props.className||'');\n\t\t\tthis.hasError = false;\n\t\t}, 500);\n\t}\n\trender() {\n\t\treturn <input\n\t\t\t\t\ttype={this.props.type}\n\t\t\t\t\tplaceholder={this.props.placeholder}\n\t\t\t\t\tname={this.props.name}\n\t\t\t\t\tid={this.props.id}\n\t\t\t\t\tclassName={this.props.className}\n\t\t\t\t\tonChange={this.props.onChange}\n\t\t\t\t\tonKeyUp={this.props.onKeyUp}\n\t\t\t\t\tdefaultValue={this.props.value}\n\t\t\t\t/>;\n\t}\n}\n\nexport default Input;","import React from 'react';\nimport Loading from './../../Components/Loading/Loading';\nimport Input from './../../Components/Input/Input';\nimport Button from './../../Components/Button/Button';\nimport { Redirect } from \"react-router-dom\";\n\nimport account from './../../Controllers/AccountController';\n\nimport './LoginPage.css';\n\nclass LoginPage extends React.Component {\n\tconstructor(props){ \n\t\tsuper(props);\n\n\t\tthis.usernameInput = React.createRef();\n\t\tthis.passwordInput = React.createRef();\n\n\t\tlet update = () => this.forceUpdate();\n\t\taccount.on('checking', update);\n\t\taccount.on('checked', update);\n\t}\n\n\tonSubmit() {\n\t\tlet username = this.usernameInput.current.value();\n\t\tlet password = this.passwordInput.current.value();\n\n\t\tif (username.length == 0)\n\t\t\tthis.usernameInput.current.error();\n\t\tif (password.length == 0)\n\t\t\tthis.passwordInput.current.error();\n\n\t\tif (username.length > 0 &&\n\t\t\tpassword.length > 0) {\n\t\t\taccount.login(username, password, (status, errParameter, data) => {\n\t\t\t\tif (errParameter === 'username' || (data.status == 'fail' && data.errCode == 1))\n\t\t\t\t\tthis.usernameInput.current.error();\n\t\t\t\tif (errParameter === 'password' || (data.status == 'fail' && data.errCode == 1))\n\t\t\t\t\tthis.passwordInput.current.error();\n\t\t\t});\n\t\t}\n\t}\n\n\trender () {\n\t\tif (account.verified) {\n\t\t\treturn <Redirect to=\"/\" />\n\t\t}\n\n\t\treturn (\n\t\t\t<div id='login-page-wrapper'>\n\t\t\t\t<div id='login-page'> \n\t\t\t\t\t<h3>Войти</h3>\n\t\t\t\t\t<div className='inputs'>\n\t\t\t\t\t\t<Input ref={this.usernameInput} placeholder=\"username\" type=\"text\" className='username' />\n\t\t\t\t\t\t<Input ref={this.passwordInput} placeholder=\"password\" type=\"password\" className='password' />\n\t\t\t\t\t</div>\n\t\t\t\t\t{account.loading ? \n\t\t\t\t\t\t<Loading inline /> :\n\t\t\t\t\t\t<Button enter invert onClick={this.onSubmit.bind(this)}>Submit</Button>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default LoginPage;","import React from 'react';\nimport Loading from './../../Components/Loading/Loading';\nimport Input from './../../Components/Input/Input';\nimport Button from './../../Components/Button/Button';\nimport { Redirect } from \"react-router-dom\";\n\nimport account from './../../Controllers/AccountController';\n\nimport './RegisterPage.css';\n\nclass RegisterPage extends React.Component {\n\tconstructor(props){ \n\t\tsuper(props);\n\n\t\tthis.usernameInput = React.createRef();\n\t\tthis.passwordInput = React.createRef();\n\t\tthis.repeatPasswordInput = React.createRef();\n\t\tthis.emailInput = React.createRef();\n\n\t\tlet update = () => this.forceUpdate();\n\t\taccount.on('checking', update);\n\t\taccount.on('checked', update);\n\t}\n\n\tonSubmit() {\n\t\tlet username = this.usernameInput.current.value();\n\t\tlet password = this.passwordInput.current.value();\n\t\tlet passwordRepeat = this.repeatPasswordInput.current.value()\n\t\tlet email = this.emailInput.current.value();\n\n\t\tif (username.length < 3 || username.length > 15 || /^bot.+$/g.test(username))\n\t\t\tthis.usernameInput.current.error();\n\t\telse if (password.length < 6 || password.length > 100)\n\t\t\tthis.passwordInput.current.error();\n\t\telse if (password !== passwordRepeat) {\n\t\t\tthis.passwordInput.current.error();\n\t\t\tthis.repeatPasswordInput.current.error();\n\t\t} else if (email.length > 0 && !account.EMAIL_REGEX.test(email))\n\t\t\tthis.emailInput.current.error();\n\t\telse {\n\t\t\taccount.register(username, password, email, (status, errParameter) => {\n\t\t\t\tif (errParameter === 'username')\n\t\t\t\t\tthis.usernameInput.current.error();\n\t\t\t\tif (errParameter === 'password')\n\t\t\t\t\tthis.passwordInput.current.error();\n\t\t\t\tif (errParameter === 'email')\n\t\t\t\t\tthis.emailInput.current.error();\n\t\t\t});\n\t\t}\n\t}\n\n\trender () {\n\t\tif (account.verified) {\n\t\t\treturn <Redirect to=\"/\" />\n\t\t}\n\n\t\treturn (\n\t\t\t<div id='register-page-wrapper'>\n\t\t\t\t<div id='register-page'> \n\t\t\t\t\t<h3>Зарегистрироваться</h3>\n\t\t\t\t\t<div className='inputs'>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Input ref={this.usernameInput} placeholder=\"юзернейм\" type=\"text\" className='username' />\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<b>уникальный</b><br />\n\t\t\t\t\t\t\t\t<b>длина</b>: 3-15 (включительно)<br />\n\t\t\t\t\t\t\t\t<b>символы</b>: латинские буквы (нижнего и верхнего регистра), цифры, символ \"_\"<br />\n\t\t\t\t\t\t\t\t<b>запрещенный шаблон</b>: bot в начале ника\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Input ref={this.passwordInput} placeholder=\"пароль\" type=\"password\" className='password' />\n\t\t\t\t\t\t\t<Input ref={this.repeatPasswordInput} placeholder=\"пароль (повтор)\" type=\"password\" className='password' />\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<b>длина</b>: 6-100 (включительно)\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Input ref={this.emailInput} placeholder=\"эл. адрес (необязательно)\" type=\"text\" className='email' />\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<b>необязательно</b><br />\n\t\t\t\t\t\t\t\t<b>шаблон</b>: эл. адрес\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{account.loading ? \n\t\t\t\t\t\t<Loading inline /> :\n\t\t\t\t\t\t<Button enter invert onClick={this.onSubmit.bind(this)}>Submit</Button>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default RegisterPage;","import API from './APIController';\n\nlet UserInfo = window.UserInfo = {\n\tcache: {},\n\t__query: [],\n\t__callbacks: [],\n\t__lastQueryAppend: 0,\n\tload: function (username, callback) {\n\t\tif (UserInfo.cache[username]) {\n\t\t\tcallback(UserInfo.cache[username]);\n\t\t\treturn;\n\t\t}\n\n\t\tlet i = UserInfo.__query.length;\n\t\tUserInfo.__query.push(username);\n\t\tUserInfo.__callbacks.push(callback);\n\t\tlet lastQueryAppend = UserInfo.__lastQueryAppend = Date.now();\n\t\tsetTimeout(function () {\n\t\t\tif (lastQueryAppend == UserInfo.__lastQueryAppend &&\n\t\t\t\tUserInfo.__query.length > 0) {\n\n\t\t\t\tAPI.GET('/account/info', {usernames: UserInfo.__query}, (status, data) => {\n\t\t\t\t\tfor (let _username in data.result) {\n\t\t\t\t\t\tUserInfo.cache[_username] = data.result[_username];\n\t\t\t\t\t\tif (username == _username)\n\t\t\t\t\t\t\tcallback(UserInfo.cache[_username]);\n\t\t\t\t\t}\n\n\t\t\t\t\tUserInfo.__query = [];\n\t\t\t\t});\n\t\t\t}\n\t\t}, 50);\n\t},\n\tmy: function (token, callback) {\n\t\tAPI.GET('/account/info', {token}, (status, data) => {\n\t\t\tif (status && data.status === 'ok' && data.result.length > 0) {\n\t\t\t\tcallback(data.result[0]);\n\t\t\t}\n\t\t});\n\t}\n}\n\n// if (localStorage.UserInfo) {\n// \tUserInfo.cache = JSON.parse(localStorage.UserInfo);\n// }\n\nexport default UserInfo;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './Textarea.css';\n\nclass Textarea extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.hasError = false;\n\t}\n\tvalue() {\n\t\tlet textarea = ReactDOM.findDOMNode(this).querySelector('textarea');\n\t\treturn textarea.value;\n\t}\n\terror() {\n\t\tif (this.hasError)\n\t\t\treturn;\n\t\tthis.hasError = true;\n\n\t\tlet textarea = ReactDOM.findDOMNode(this).querySelector('textarea');\n\t\ttextarea.className = (this.props.className||'') + ' error';\n\t\tsetTimeout(() => {\n\t\t\ttextarea.className = (this.props.className||'');\n\t\t\tthis.hasError = false;\n\t\t}, 500);\n\t}\n\tonKeyUp(event) {\n\t\tif (this.props.onKeyUp)\n\t\t\tthis.props.onKeyUp(event);\n\n\t\tlet rootdiv = ReactDOM.findDOMNode(this);\n\t\tlet textarea = rootdiv.querySelector('textarea');\n\t\tlet span = rootdiv.querySelector('span');\n\t\tif (this.props.max) {\n\t\t\tspan.innerText = textarea.value.length+' ('+this.props.max+')';\n\t\t\tspan.className = (this.props.max < textarea.value.length) ? 'error' : '';\n\t\t} else\n\t\t\tspan.innerText = textarea.value.length;\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div className='textarea'>\n\t\t\t \t<textarea\n\t\t\t\t\ttype={this.props.type}\n\t\t\t\t\tplaceholder={this.props.placeholder}\n\t\t\t\t\tname={this.props.name}\n\t\t\t\t\tid={this.props.id}\n\t\t\t\t\tclassName={this.props.className}\n\t\t\t\t\tonChange={this.props.onChange}\n\t\t\t\t\tonKeyUp={this.onKeyUp.bind(this)}\n\t\t\t\t\tdefaultValue={this.props.value}\n\t\t\t\t></textarea>\n\t\t\t\t<span>{(this.props.value||'').length + (this.props.max ? ' ('+this.props.max+')' : '')}</span>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Textarea;","import React from 'react';\nimport account from './../../Controllers/AccountController';\nimport UserInfo from './../../Controllers/UserInfoController';\nimport Textarea from './../../Components/Textarea/Textarea';\nimport Input from './../../Components/Input/Input';\nimport Button from './../../Components/Button/Button';\nimport Loading from './../../Components/Loading/Loading';\nimport {Redirect} from \"react-router-dom\";\n\nimport './MyAccount.css';\n\nconst TIME_RANGES = [\n\t{string: ['год', 'года', 'года', 'года', 'лет'], value: 1000 * 60 * 60 * 24 * 365},\n\t{string: ['месяц', 'месяца', 'месяца', \"месяца\", \"месяцев\"], value: 1000 * 60 * 60 * 24 * 30},\n\t{string: ['день', 'дня', \"дня\", \"дня\", \"дней\"], value: 1000 * 60 * 60 * 24},\n\t{string: ['час', 'часа', \"часа\", \"часа\", \"часов\"], value: 1000 * 60 * 60},\n\t{string: ['минуту', 'минуты', \"минуты\", \"минуты\", \"минут\"], value: 1000 * 60},\n\t{string: ['секунду', 'секунды', \"секунды\", \"секунды\", \"секунд\"], value: 1000}\n];\n\nfunction range(x, min, max) {\n\treturn Math.min(Math.max(x, min), max);\n}\nfunction digit(x) {\n\tif (x < 20)\n\t\treturn x;\n\tlet b = x % 10, a = (x-b)/10%10; // x = xxxxxab; (ex. 923912; b=2, a=1) \n\tif (a >= 2 && b > 0)\n\t\treturn b;\n\treturn x;\n}\n\nclass MyAccountPage extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.submitButton = React.createRef();\n\t\tthis.aboutInput = React.createRef();\n\t\tthis.emailInput = React.createRef();\n\n\t\tthis.state = {loading: true, info: null};\n\t\tthis._ismounted = false;\n\n\t\tlet update = () => this.forceUpdate();\n\t\taccount.on('checking', update);\n\t\taccount.on('checked', update);\n\t\tUserInfo.my(account.token, (info) => {\n\t\t\tlet newState = {loading: false, info};\n\t\t\tif (this._ismounted)\n\t\t\t\tthis.setState(newState);\n\t\t\telse this.state = newState;\n\t\t});\n\t}\n\n\tcomponentDidMount() { \n\t\tthis._ismounted = true;\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis._ismounted = false;\n\t}\n\n\thandleLogout() {\n\t\taccount.logout();\n\t}\n\thandleEdit() {\n\t\tlet email = this.emailInput.current.value();\n\t\tlet about = this.aboutInput.current.value();\n\n\t\tif (email.length > 0 && !account.EMAIL_REGEX.test(email))\n\t\t\tthis.emailInput.current.error();\n\t\telse if (about.length > 250)\n\t\t\tthis.aboutInput.current.error();\n\t\telse {\n\t\t\taccount.edit(email, about, () => {\n\t\t\t\tlet info = this.state.info;\n\t\t\t\tinfo.email = email;\n\t\t\t\tinfo.about = about;\n\t\t\t\tthis.setState({info});\n\t\t\t\tthis.update();\n\t\t\t})\n\t\t}\n\t}\n\thandleImageUpload(e) {\n\t\te.persist()\n\t\tlet input = e.target;\n\t\tlet file = input.files[0];\n\t\tif (typeof file !== 'object')\n\t\t\treturn;\n\n\t\taccount.uploadImage(file, (status, data) => {\n\t\t\tif (status && data.status == 'ok') {\n\t\t\t\tlet info = this.state.info;\n\t\t\t\tinfo.image = data;\n\t\t\t\tthis.setState({imaget: Date.now(), info});\n\t\t\t} else {\n\t\t\t\talert(data.errText);\n\t\t\t}\n\t\t});\n\t}\n\tupdate() {\n\t\tthis.submitButton.current.setDisabled(\n\t\t\tthis.aboutInput.current.value() == this.state.info.about &&\n\t\t\tthis.emailInput.current.value() == this.state.info.email\n\t\t);\n\t}\n\tgetTimeString() {\n\t\tlet timeSpent = Date.now() - this.state.info['registration-time'];\n\t\tlet timeString = '';\n\t\tfor (let d = timeSpent, i = 0; i < TIME_RANGES.length; ++i) {\n\t\t\tlet v = Math.floor(d / TIME_RANGES[i].value);\n\t\t\tif (v < 1) continue;\n\t\t\ttimeString += v + ' ' + TIME_RANGES[i].string[range(digit(v), 1, TIME_RANGES[i].string.length)-1] + ' ';\n\t\t\td -= v * TIME_RANGES[i].value;\n\t\t}\n\t\treturn timeString;\n\t}\n\trender() {\n\t\tif (!account.loading && (!account.verified || !account.token))\n\t\t\treturn <Redirect to=\"/login/\" />;\n\n\t\tif (account.loading || this.state.loading)\n\t\t\treturn <Loading />;\n\n\t\tlet timeString = this.timeString || (this.timeString = this.getTimeString());\n\n\t\treturn (\n\t\t\t<div id=\"my-account-wrapper\">\n\t\t\t\t<div id=\"my-account\">\n\t\t\t\t\t<span id=\"user-image\" style={{backgroundImage:'url('+this.state.info.image[128]+(this.state.imaget?'?'+this.state.imaget:'')+')'}}>\n\t\t\t\t\t\t<span className=\"upload\"></span>\n\t\t\t\t\t\t<input onChange={this.handleImageUpload.bind(this)} type='file' accept='.png,.jpg,.jpeg,.gif' />\n\t\t\t\t\t</span>\n\t\t\t\t\t<div id=\"user-info\">\n\t\t\t\t\t\t<h1>{this.state.info.username}</h1>\n\t\t\t\t\t\t<p id=\"user-time\">в bodjo уже {timeString}</p>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<Input ref={this.emailInput} onKeyUp={this.update.bind(this)} onChange={this.update.bind(this)} type='text' placeholder='Эл. адрес' value={this.state.info.email} />\n\t\t\t\t\t\t<Textarea ref={this.aboutInput} onKeyUp={this.update.bind(this)} onChange={this.update.bind(this)} type='text' placeholder='О себе' value={this.state.info.about} max={250} />\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<Button disabled ref={this.submitButton} enter onClick={this.handleEdit.bind(this)}>Изменить</Button>\n\t\t\t\t\t\t<span className='space' />\n\t\t\t\t\t\t<Button invert onClick={this.handleLogout}>Выйти</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\nexport default MyAccountPage;","import React from 'react';\nimport './News.css';\n\nclass NewsPage extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<div id='news'>\n\t\t\t\t<b>{window.randomFace()}</b>\n\t\t\t\t<p>ну, скоро будет...</p>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default NewsPage;","import React from 'react';\nimport './Scoreboard.css';\n\nclass ScoreboardPage extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<div id=\"scoreboard\">\n\t\t\t\t<b>{window.randomFace()}</b>\n\t\t\t\t<p>пока нету</p>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default ScoreboardPage;","import React from 'react';\nimport Link from './../../Components/Link/Link';\nimport UserInfo from './../../Controllers/UserInfoController';\nimport './User.css';\n\nclass User extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {loading: true, info: null};\n\t\tUserInfo.load(this.props.username, info => {\n\t\t\tthis.setState({\n\t\t\t\tloading: false,\n\t\t\t\tinfo\n\t\t\t});\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className={'user'+(this.state.loading?' loading':'')}>\n\t\t\t\t<span \n\t\t\t\t\tclassName='image'\n\t\t\t\t\tstyle={{backgroundImage: (this.state.info ? 'url('+this.state.info.image[64]+')' : '')}}>\n\t\t\t\t</span>\n\t\t\t\t{this.props.me ? \n\t\t\t\t\t<Link to=\"/my-account/\" className='username'>{this.props.username}</Link> : \n\t\t\t\t\t<span className='username'>{this.props.username}</span>\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default User;","import React from 'react';\nimport Loading from './../../Components/Loading/Loading';\nimport User from './../../Components/User/User';\nimport Link from './../../Components/Link/Link';\nimport account from './../../Controllers/AccountController';\n\nclass Auth extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tlet update = () => this.forceUpdate();\n\t\taccount.on('checking', update);\n\t\taccount.on('checked', update);\n\t}\n\n\trender() {\n\t\tif (account.loading)\n\t\t\treturn <Loading />\n\n\t\tif (account.token && account.username && account.verified) {\n\t\t\treturn <User me username={account.username} />\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Link to=\"/login/\">войти</Link> <span>/</span> <Link to=\"/register/\">регистрация</Link>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Auth;","import React from 'react';\nimport Link from './../../Components/Link/Link';\nimport Auth from './Auth';\nimport './Header.css';\n\nexport default function Header() {\n\treturn (\n\t\t<div id=\"header\">\n\t\t\t<div id=\"title\">bodjo<Link className='version' to='https://pages.bodjo.net/#main.devstatus.ru'>v2.0</Link></div>\n\t\t\t<div id=\"auth\">\n\t\t\t\t<Auth></Auth>\n\t\t\t</div>\n\t\t\t<div id=\"menu\">\n\t\t\t\t<Link to=\"/\">главная</Link>\n\t\t\t\t{/*<Link to=\"/about/\">про bodjo</Link>*/}\n\t\t\t\t<Link to=\"/news/\">новости</Link>\n\t\t\t\t<Link to=\"/scoreboard/\">таблица</Link>\n\t\t\t</div>\n\t\t</div>\n\t);\n};","import React from 'react';\nimport './Footer.css';\n\nexport default function Footer() {\n\treturn (\n\t\t<div id=\"footer\">\n\t\t\t<div className=\"contacts\">\n\t\t\t\tTelegram: <a href=\"https://t.me/dkaraush\">@dkaraush</a><br />\n\t\t\t\tE-mail: <a href=\"mailto://dkaraush@gmail.com\">dkaraush@gmail.com</a>\n\t\t\t</div>\n\t\t\t<div className=\"love\"><p>made with &lt;3</p></div>\n\t\t</div>\n\t);\n}","import React from 'react';\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\n\nimport Index from './Pages/Index/Index';\nimport LoginPage from './Pages/LoginPage/LoginPage';\nimport RegisterPage from './Pages/RegisterPage/RegisterPage';\nimport MyAccountPage from './Pages/MyAccount/MyAccount';\nimport NewsPage from './Pages/News/News';\nimport ScoreboardPage from './Pages/Scoreboard/Scoreboard';\n\nimport Header from './Parts/Header/Header';\nimport Footer from './Parts/Footer/Footer';\n\nfunction App() {\n  return (\n    <Router>\n      <Header></Header>\n      <div id=\"main\">\n        <Route path=\"/\" exact component={Index} />\n        <Route path=\"/news/\" component={NewsPage} />\n        <Route path=\"/scoreboard/\" component={ScoreboardPage} />\n        <Route path=\"/login/\" component={LoginPage} />\n        <Route path=\"/register/\" component={RegisterPage} />\n        <Route path=\"/my-account/\" component={MyAccountPage} />\n      </div>\n      <Footer></Footer>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}