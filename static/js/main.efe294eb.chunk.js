(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(25).concat([function(e,t,n){e.exports=n(52)},,,,,function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(10),s=n.n(i),o=n(13),l=n(12),c=n(1),u=n(2),d=n(4),h=n(3),m=n(5),p=n(6),f=(n(30),{}),v=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).__to=e.to,Array.isArray(f[e.to])||(f[e.to]=[]),f[e.to].push(Object(p.a)(Object(p.a)(n))),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillUnmount",value:function(){var e=this,t=f[this.props.to].findIndex(function(t){return t==e});t>=0&&f[this.props.to].splice(t,1)}},{key:"onClick",value:function(e){var t=window.location.pathname;for(var n in f)if(n==t||n==e){var a=!0,r=!1,i=void 0;try{for(var s,o=f[n][Symbol.iterator]();!(a=(s=o.next()).done);a=!0){s.value.forceUpdate()}}catch(l){r=!0,i=l}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}}this.__to=e}},{key:"render",value:function(){return 0==this.props.to.indexOf("//")||0==this.props.to.indexOf("http://")||0==this.props.to.indexOf("https://")?r.a.createElement("a",{href:this.props.to,className:(this.props.className||"")+" link"},this.props.children):r.a.createElement(o.b,{to:this.props.to,onClick:this.onClick.bind(this,this.props.to),className:"link "+(this.props.className||"")+(window.location.pathname==this.props.to||window.location.pathname==this.__to?" active":"")},this.props.children)}}]),t}(r.a.Component),g=(n(35),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).enterHandler=n.onEnter.bind(Object(p.a)(Object(p.a)(n))),n.state={disabled:e.disabled},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"_down",value:function(e,t){if(!this.state.disabled){var n=e.getBoundingClientRect(),a=t.clientX-n.left,r=t.clientY-n.top,i=Math.max(Math.sqrt(Math.pow(a,2)+Math.pow(r,2)),Math.sqrt(Math.pow(a-n.width,2)+Math.pow(r,2)),Math.sqrt(Math.pow(a,2)+Math.pow(r-n.height,2)),Math.sqrt(Math.pow(a-n.width,2)+Math.pow(r-n.height,2))),s=document.createElement("div");s.className="ripple",s.style.position="absolute",s.style.transition="all 0.25s cubic-bezier(0.215, 0.61, 0.355, 1)",s.style.borderRadius="50%",s.style.opacity="1",s.style.top=r+"px",s.style.left=a+"px",s.style.width=s.style.height="0px",s.id="s"+Date.now(),setTimeout(function(){s.style.opacity="0.75",s.style.top=r-i+"px",s.style.left=a-i+"px",s.style.width=s.style.height=2*i+"px"},10),e.append(s)}}},{key:"_up",value:function(e,t){var n=e.querySelectorAll(".ripple");if(null!=n)for(var a=function(e){var t=n[e],a=parseInt(t.id.substring(1));Date.now()-a>250?(t.style.opacity="0",setTimeout(t.remove.bind(t),250)):setTimeout(function(){t.style.opacity="0",setTimeout(t.remove.bind(t),250)},250-(Date.now()-a))},r=0;r<n.length;++r)a(r)}},{key:"componentDidMount",value:function(){var e=s.a.findDOMNode(this);e.style.position="relative",e.style.overflow="hidden",this.down=this._down.bind(this,e),this.up=this._up.bind(this,e),e.addEventListener("mousedown",this.down),document.body.addEventListener("mouseup",this.up)}},{key:"componentWillMount",value:function(){this.props.enter&&window.addEventListener("keyup",this.enterHandler)}},{key:"componentWillUnmount",value:function(){this.props.enter&&window.removeEventListener("keyup",this.enterHandler),document.body.removeEventListener("mouseup",this.up)}},{key:"componentWillReceiveProps",value:function(e){e.disabled!==this.state.disabled&&this.setState({disabled:e.disabled})}},{key:"onEnter",value:function(e){13==e.keyCode&&"function"===typeof this.props.onClick&&this.props.onClick()}},{key:"redirect",value:function(e){window.location.href=e}},{key:"render",value:function(){var e=this.props.className||"";return this.props.invert&&(e+=" invert"),this.state.disabled&&(e+=" disabled"),r.a.createElement("div",{className:e+" button",id:this.props.id,onClick:this.props.to?this.redirect.bind(this,this.props.to):this.props.onClick},this.props.children)}}]),t}(r.a.Component)),E=(n(36),function(e){return r.a.createElement("div",{className:(e.inline?"inline ":"")+"loader"})});n(37);window.faces=["\\(o_o)/","(\u30ce\u0ca0\u76ca\u0ca0)\u30ce\u5f61\u253b\u2501\u253b","(\u256f\xb0\u25a1\xb0\uff09\u256f\ufe35 \u253b\u2501\u253b","\u30fd(`\u0414\xb4)\uff89","\u30ce( \xba _ \xba\u30ce)","\xac_\xac","\xaf(\xb0_o)/\xaf","\xaf\\_(\u30c4)_/\xaf","\xb0\u0414\xb0","( \ufe36\ufe3f\ufe36)","( .-. )","( .o.)"],window.randomFace=function(){return window.faces[Math.round(Math.random()*(window.faces.length-1))]};var b=100500;window.showDialog=function(e,t,n){var a=document.createElement("div");a.className="dialog",a.style.zIndex=b++;var r=document.createElement("div");r.className="dialog-content";var i=document.createElement("h1");i.innerText=window.randomFace(),r.appendChild(i);var s=document.createElement("h2");s.innerText=e,r.appendChild(s);var o=document.createElement("p");o.innerText=t,r.appendChild(o);var l=document.createElement("span");l.innerText=n,r.appendChild(l),a.appendChild(r),document.body.appendChild(a),document.body.style.overflow="hidden"};var y={SERVER_HOST:null,__query:[],__init:function(){y.GET("https://bodjo.net/SERVER_HOST",function(e,t){e?(y.SERVER_HOST=t,y.__query.length>0&&y.__query.forEach(function(e){return y[e[0]].apply(y,e.slice(1))})):window.showDialog("Obtaining main server hostname error.","https://bodjo.net\nGET /SERVER_HOST/","ERR_SERVER_HOST_MISSING")})},GET:function(e,t,n,a){"object"!==typeof t&&(a=n||!0,n=t),"undefined"===typeof a&&(a=!0);var r=new XMLHttpRequest,i=!1,s=e;if("object"===typeof t){if(null==y.SERVER_HOST)return void y.__query.push(["GET"].concat(Array.prototype.slice.apply(arguments)));i=!0,e=y.SERVER_HOST+e+"?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&"),s=y.SERVER_HOST+e+"?"+Object.keys(t).map(function(e){return e+"="+("token"==e||"password"==e?"<"+e+">":encodeURIComponent(t[e]))}).join("&")}console.log("[API] GET "+e),r.open("GET",e,!0),r.send(),r.onreadystatechange=function(){if(4===r.readyState)if(200==r.status){var e=r.responseText;if(a)try{e=JSON.parse(e)}catch(t){}n(!0,e)}else i&&window.showDialog("Bad API Response","Received bad HTTP response:\n\nGET "+s+"\n"+r.getAllResponseHeaders()+"\n\n"+r.statusText,"ERR_BAD_API_REQUEST"),console.error("Bad HTTP Response: "+r.statusCode+" - "+r.statusText),n(!1,r)}},POST:function(e,t,n,a,r){"object"!==typeof t&&(r=a||!0,a=n,n=t),"undefined"===typeof r&&(r=!0);var i=new XMLHttpRequest,s=!1,o=e;if("object"===typeof t){if(null==y.SERVER_HOST)return void y.__query.push(["POST"].concat(Array.prototype.slice.apply(arguments)));s=!0,e=y.SERVER_HOST+e+"?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&"),o=y.SERVER_HOST+e+"?"+Object.keys(t).map(function(e){return e+"="+("token"==e||"password"==e?"<"+e+">":encodeURIComponent(t[e]))}).join("&")}console.log("[API] POST "+e),i.open("POST",e,!0),n(i),i.onreadystatechange=function(){if(4===i.readyState)if(200==i.status){var e=i.responseText;if(r)try{e=JSON.parse(e)}catch(t){}a(!0,e)}else s&&window.showDialog("Bad API Response","Received bad HTTP response:\n\nGET "+o+"\n"+i.getAllResponseHeaders()+"\n\n"+i.statusText,"ERR_BAD_API_REQUEST"),console.error("Bad HTTP Response: "+i.statusCode+" - "+i.statusText),a(!1,i)}}};y.__init(),window.API=y;var k=y,w=n(24),j={data:{},get:function(e){var t=null;if(I(e)?(t=I(e),"undefined"===typeof O(e)&&_(e,t)):O(e)&&(T(e,t=O(e)),T(e,t,{domain:"bodjo.net"})),null!=t)try{t=JSON.parse(t)}catch(n){}else if("undefined"!==typeof j.data[e])return j.data[e];return t},set:function(e,t){var n=JSON.stringify(t);_(e,n),T(e,n),T(e,n,{domain:"bodjo.net"}),j.data[e]=t},remove:function(e){!function(e){T(e,"",{"max-age":-1})}(e),localStorage.removeItem(e),delete j.data[e]}};function O(e){try{return localStorage.getItem(e)}catch(t){return null}}function _(e,t){try{return localStorage.setItem(e,t)}catch(n){return null}}function I(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function T(e,t,n){n=Object(w.a)({path:"/"},n);var a=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var r in n){a+="; "+r;var i=n[r];!0!==i&&(a+="="+i)}document.cookie=a}window.Storage=j;var S=j,N=function(){function e(){Object(c.a)(this,e),this.EMAIL_REGEX=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,this.__listeners={},this.token=S.get("bodjo-token"),this.username=S.get("bodjo-username"),this.loading=!1,this.verified=!1,null!=this.token&&"string"===typeof this.token&&this.check()}return Object(u.a)(e,[{key:"on",value:function(e,t){"undefined"===typeof this.__listeners[e]&&(this.__listeners[e]=[]),this.__listeners[e].push(t)}},{key:"emit",value:function(e){if("undefined"!==typeof this.__listeners[e]){var t=Array.prototype.slice.apply(arguments).slice(1),n=!0,a=!1,r=void 0;try{for(var i,s=this.__listeners[e][Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var o=i.value;o.apply(o,t)}}catch(l){a=!0,r=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}}}},{key:"login",value:function(e,t,n){var a=this;this.loading=!0,this.emit("checking"),k.GET("/account/login",{username:e,password:t},function(t,r){a.loading=!1,a.verified=t&&"ok"===r.status,a.verified&&(a.token=r.token.value,a.username=e,S.set("bodjo-token",a.token),S.set("bodjo-username",a.username)),a.emit("checked",a.verified),n(a.verified,r.errParameter,r)})}},{key:"register",value:function(e,t,n,a){var r=this;this.loading=!0,this.emit("checking");var i={username:e,password:t};"undefined"!==typeof n&&n.length>0&&(i.email=n),k.GET("/account/register",i,function(e,t){r.loading=!1,r.verified=e&&"ok"===t.status,r.verified&&(r.token=t.token.value,r.username=t.token.username,S.set("bodjo-token",r.token),S.set("bodjo-username",r.username)),r.emit("checked",r.verified),a(r.verified,t.errParameter,t)})}},{key:"uploadImage",value:function(e,t){if(this.verified){k.POST("/account/uploadImage",{token:this.token,ext:{"image/png":"png","image/jpeg":"jpeg","image/jpg":"jpg","image/gif":"gif"}[e.type]},function(t){var n=new FormData;n.append("image",e),t.send(n)},function(e,n){t(e&&"ok"==n.status,n)})}}},{key:"logout",value:function(){var e=this;this.token&&this.verified&&(this.loading=!0,k.GET("/account/logout",{token:this.token},function(t,n){e.loading=!1,e.token=null,e.verified=!1,t&&"ok"==n.status&&console.log("token removed successfully"),e.emit("checked",e.verified)})),S.remove("bodjo-token"),S.remove("bodjo-username")}},{key:"edit",value:function(e,t,n){var a={token:this.token};e.length>0&&(a.email=e),t.length>0&&(a.about=t),k.GET("/account/edit",a,function(e,t){n(e&&"ok"===t.status)})}},{key:"check",value:function(){var e=this;this.loading=!0,this.emit("checking"),k.GET("/account/check",{token:this.token},function(t,n){e.loading=!1,e.verified=t&&"ok"===n.status,n.token&&n.token.username&&(e.username=n.token.username),e.verified&&(S.set("bodjo-token",e.token),S.set("bodjo-username",e.username)),e.emit("checked",e.verified)})}}]),e}(),R=window.account=new N,x=(n(38),function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).gameServers={},n.state={loading:!0};var a=Object(p.a)(Object(p.a)(n));function r(e,t,n){var r={},i=!0,s=!1,o=void 0;try{for(var l,c=n.servers[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value,d=a.gameServers[u.name]=new C(u,function(e){var t={};t[e.name]=e,a.setState(t)});d.obtain(),r[u.name]=d.info()}}catch(h){s=!0,o=h}finally{try{i||null==c.return||c.return()}finally{if(s)throw o}}r.loading=!1,t?e.setState(r):e.state=r}if(window.__gamesListCache)r(Object(p.a)(Object(p.a)(n)),!1,window.__gamesListCache);else{var i={};R.token&&R.verified&&(i.token=R.token),k.GET("/games/info",i,function(e,t){e&&"ok"===t.status&&(r(Object(p.a)(Object(p.a)(n)),!0,t),window.__gamesListCache=t)})}return n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillUnmount",value:function(){for(var e in this.gameServers)this.gameServers[e].destroy();this.state={}}},{key:"go",value:function(e,t){k.GET("/games/join",{name:e,token:R.token},function(e,n){e&&"ok"===n.status&&(window.location.href=t+"/#"+n.username+":"+n.gameSessionToken)})}},{key:"render",value:function(){var e=[];if(!this.state.loading){var t={};for(var n in this.state)if("loading"!=n){var a=this.state[n].game;this.state[n].local&&this.state[n].status&&(a="_"+this.state[n].name),"undefined"===typeof t[a]&&(t[a]=[]),t[a].push(this.state[n])}for(var i in t){var s=(t[i][0]||{game:i}).game,o=[],l=!0,c=!1,u=void 0;try{for(var d,h=t[i][Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var m=d.value;o.push(r.a.createElement("div",{className:"game-server",key:m.name},r.a.createElement("div",{className:"info"},r.a.createElement("span",{className:"status "+(m.status?"enabled":"disabled")}),r.a.createElement("span",{className:"players-count"},m.status?r.a.createElement("span",null,"[",m.local?r.a.createElement("i",null,"local"):r.a.createElement("span",null,r.a.createElement("b",null,m.players.value),"/",m.players.max),"]"):r.a.createElement("span",null,"[",r.a.createElement("b",{className:"loading"},r.a.createElement("span",null,"-/|\\")),"]")),r.a.createElement("span",{className:"name"},m.showName)),r.a.createElement("div",{className:"go"+(R.verified?"":" disabled")},r.a.createElement("div",null,r.a.createElement(g,{disabled:!m.status||!R.verified,onClick:this.go.bind(this,m.name,m.link)},"\u0418\u0433\u0440\u0430\u0442\u044c"),r.a.createElement("span",{className:"label"},"\u043d\u0443\u0436\u043d\u043e ",r.a.createElement(v,{to:"/login/"},"\u0432\u043e\u0439\u0442\u0438"))),r.a.createElement(g,{invert:!0,disabled:!m.status,to:m.spectateLink},"\u041d\u0430\u0431\u043b\u044e\u0434\u0430\u0442\u044c"))))}}catch(p){c=!0,u=p}finally{try{l||null==h.return||h.return()}finally{if(c)throw u}}e.unshift(r.a.createElement("div",{className:"game"+("_"==i[0]?" event":""),key:i,style:{backgroundImage:"url(assets/games/"+s+"/bg.png)"}},r.a.createElement("h3",null,"_"==i[0]?"LIVE "+s+" hackathon":s),"_"==i[0]?r.a.createElement("div",{className:"eventanim"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null)):"",o,r.a.createElement("div",{className:"grey"})))}}return 0==e.length&&e.push(r.a.createElement("div",{className:"no-games",key:"no-games"},r.a.createElement("h3",null,window.randomFace()),r.a.createElement("span",null,"\u0432\u0441\u0435 \u0441\u043b\u043e\u043c\u0430\u043b\u043e\u0441\u044c! \u0433\u0434\u0435 \u0438\u0433\u0440\u044b\u044b?"))),r.a.createElement("div",{className:"section games"},r.a.createElement("h2",null,r.a.createElement("img",{src:"/assets/games.png"}),"\u0418\u0433\u0440\u044b"),this.state.loading?r.a.createElement(E,null):e)}}]),t}(r.a.Component)),C=function(){function e(t,n){Object(c.a)(this,e),this.onUpdate=n,this.host=t.host,this.apihost=t.apihost,this.name=t.name,this.game=t.game,this.showName=this.name.substring(0,this.game.length+1)==this.game+"-"?this.name.substring(this.game.length+1):this.name,this.status=!1,this.link=t.host,this.link.indexOf("http://")<0&&this.link.indexOf("https://")<0&&(this.link="http://"+this.link),this.spectateLink=this.link+"/spectate",this.loading=!0,this.local=0==this.apihost.length,this.players={value:0,max:0}}return Object(u.a)(e,[{key:"update",value:function(){this.onUpdate(this.info())}},{key:"info",value:function(){return{name:this.name,showName:this.showName,game:this.game,host:this.host,link:this.link,local:this.local,status:this.status,players:this.players,spectateLink:this.spectateLink}}},{key:"destroy",value:function(){this.pingTimeout&&clearTimeout(this.pingTimeout)}},{key:"obtain",value:function(){this.loadInfo()}},{key:"loadInfo",value:function(e){var t=this;if(this.local){var n=new Image;n.src=this.link+"/favicon.png",n.onload=function(){var e=t.status;t.status=!0,e!=t.status&&t.update()}}else k.GET(this.apihost+"/status",function(n,a){if(n)t.players.value=a.playersCount,t.players.max=a.maxPlayersCount,t.loading=!1,t.status=!0,t.update();else{var r=t.status;t.status=!1,r!=t.status&&t.update()}"function"===typeof e&&e()})}}]),e}(),M=x,U=(n(39),2),A=function(e){function t(e){var n;function a(e,t,n){var a=n.pages,r=!0,i=!1,s=void 0;try{for(var o,l=a[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var c=o.value;c.html=window.parseBodjoPage(c.preview)+('<span class="closer"></span><a class="link more" href="https://pages.bodjo.net/#'+c.id+'">\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435...</a>')}}catch(d){i=!0,s=d}finally{try{r||null==l.return||l.return()}finally{if(i)throw s}}var u={news:a,newsTotal:n.total,loading:!1};t?e.setState(u):e.state=u}return Object(c.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={news:[],newsTotal:0,loading:!0},window.__newsListCache?a(Object(p.a)(Object(p.a)(n)),!1,window.__newsListCache):k.GET("/pages/search",{q:"news.",preview:1,order:!1,count:U},function(e,t){e&&"ok"===t.status&&(a(Object(p.a)(Object(p.a)(n)),!0,t),window.__newsListCache=t)}),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"section news"},r.a.createElement("h2",null,r.a.createElement("img",{src:"/assets/news.png"}),"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"),this.state.loading?r.a.createElement(E,null):[this.state.news.map(function(e){return r.a.createElement("div",{key:e.id,className:"news-piece bodjo-page",dangerouslySetInnerHTML:{__html:e.html}})}),this.state.newsTotal>U?r.a.createElement(v,{to:"/news/"},"\u0411\u043e\u043b\u044c\u0448\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439..."):""])}}]),t}(r.a.Component),P=(n(40),function(e){function t(e){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).call(this,e))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return setTimeout(window.loadBodjoPage.bind(null,"main.about.ru","#index .whatisit",{signature:!1,cache:!0}),1),r.a.createElement("div",{id:"index"},r.a.createElement("div",{className:"left"},r.a.createElement("div",{className:"section whatisit"}),r.a.createElement(M,null)),r.a.createElement("div",{className:"right"},r.a.createElement(A,null)))}}]),t}(r.a.Component)),L=(n(41),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).hasError=!1,n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"value",value:function(){return s.a.findDOMNode(this).value}},{key:"error",value:function(){var e=this,t=s.a.findDOMNode(this);this.hasError||(this.hasError=!0,t.className=(this.props.className||"")+" error",setTimeout(function(){t.className=e.props.className||"",e.hasError=!1},500))}},{key:"render",value:function(){return r.a.createElement("input",{type:this.props.type,placeholder:this.props.placeholder,name:this.props.name,id:this.props.id,className:this.props.className,onChange:this.props.onChange,onKeyUp:this.props.onKeyUp,defaultValue:this.props.value})}}]),t}(r.a.Component)),q=(n(42),function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).usernameInput=r.a.createRef(),n.passwordInput=r.a.createRef();var a=function(){return n.forceUpdate()};return R.on("checking",a),R.on("checked",a),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"onSubmit",value:function(){var e=this,t=this.usernameInput.current.value(),n=this.passwordInput.current.value();0==t.length&&this.usernameInput.current.error(),0==n.length&&this.passwordInput.current.error(),t.length>0&&n.length>0&&R.login(t,n,function(t,n,a){("username"===n||"fail"==a.status&&1==a.errCode)&&e.usernameInput.current.error(),("password"===n||"fail"==a.status&&1==a.errCode)&&e.passwordInput.current.error()})}},{key:"render",value:function(){return R.verified?r.a.createElement(l.a,{to:"/"}):r.a.createElement("div",{id:"login-page-wrapper"},r.a.createElement("div",{id:"login-page"},r.a.createElement("h3",null,"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement("div",{className:"inputs"},r.a.createElement(L,{ref:this.usernameInput,placeholder:"\u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c",type:"text",className:"username"}),r.a.createElement(L,{ref:this.passwordInput,placeholder:"\u043f\u0430\u0440\u043e\u043b\u044c",type:"password",className:"password"})),R.loading?r.a.createElement(E,{inline:!0}):r.a.createElement(g,{enter:!0,invert:!0,onClick:this.onSubmit.bind(this)},"Submit")))}}]),t}(r.a.Component)),G=(n(43),function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).usernameInput=r.a.createRef(),n.passwordInput=r.a.createRef(),n.repeatPasswordInput=r.a.createRef(),n.emailInput=r.a.createRef();var a=function(){return n.forceUpdate()};return R.on("checking",a),R.on("checked",a),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"onSubmit",value:function(){var e=this,t=this.usernameInput.current.value(),n=this.passwordInput.current.value(),a=this.repeatPasswordInput.current.value(),r=this.emailInput.current.value();t.length<3||t.length>15||/^bot.+$/g.test(t)?this.usernameInput.current.error():n.length<6||n.length>100?this.passwordInput.current.error():n!==a?(this.passwordInput.current.error(),this.repeatPasswordInput.current.error()):r.length>0&&!R.EMAIL_REGEX.test(r)?this.emailInput.current.error():R.register(t,n,r,function(t,n){"username"===n&&e.usernameInput.current.error(),"password"===n&&e.passwordInput.current.error(),"email"===n&&e.emailInput.current.error()})}},{key:"render",value:function(){return R.verified?r.a.createElement(l.a,{to:"/"}):r.a.createElement("div",{id:"register-page-wrapper"},r.a.createElement("div",{id:"register-page"},r.a.createElement("h3",null,"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),r.a.createElement("div",{className:"inputs"},r.a.createElement("div",null,r.a.createElement(L,{ref:this.usernameInput,placeholder:"\u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c",type:"text",className:"username"}),r.a.createElement("span",null,r.a.createElement("b",null,"\u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439"),r.a.createElement("br",null),r.a.createElement("b",null,"\u0434\u043b\u0438\u043d\u0430"),": 3-15 (\u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e)",r.a.createElement("br",null),r.a.createElement("b",null,"\u0441\u0438\u043c\u0432\u043e\u043b\u044b"),': \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b (\u043d\u0438\u0436\u043d\u0435\u0433\u043e \u0438 \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430), \u0446\u0438\u0444\u0440\u044b, \u0441\u0438\u043c\u0432\u043e\u043b "_"',r.a.createElement("br",null),r.a.createElement("b",null,"\u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043d\u044b\u0439 \u0448\u0430\u0431\u043b\u043e\u043d"),": bot \u0432 \u043d\u0430\u0447\u0430\u043b\u0435 \u043d\u0438\u043a\u0430")),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(L,{ref:this.passwordInput,placeholder:"\u043f\u0430\u0440\u043e\u043b\u044c",type:"password",className:"password"}),r.a.createElement(L,{ref:this.repeatPasswordInput,placeholder:"\u043f\u0430\u0440\u043e\u043b\u044c (\u043f\u043e\u0432\u0442\u043e\u0440)",type:"password",className:"password-repeat"})),r.a.createElement("span",null,r.a.createElement("b",null,"\u0434\u043b\u0438\u043d\u0430"),": 6-100 (\u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e)")),r.a.createElement("div",null,r.a.createElement(L,{ref:this.emailInput,placeholder:"\u044d\u043b. \u0430\u0434\u0440\u0435\u0441 (\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)",type:"text",className:"email"}),r.a.createElement("span",null,r.a.createElement("b",null,"\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"),r.a.createElement("br",null),r.a.createElement("b",null,"\u0448\u0430\u0431\u043b\u043e\u043d"),": \u044d\u043b. \u0430\u0434\u0440\u0435\u0441"))),R.loading?r.a.createElement(E,{inline:!0}):r.a.createElement(g,{enter:!0,invert:!0,onClick:this.onSubmit.bind(this)},"Submit")))}}]),t}(r.a.Component)),H=window.UserInfo={cache:{},__query:[],__callbacks:[],__lastQueryAppend:0,load:function(e,t){if(H.cache[e])t(H.cache[e]);else{H.__query.length;H.__query.push(e),H.__callbacks.push(t);var n=H.__lastQueryAppend=Date.now();setTimeout(function(){n==H.__lastQueryAppend&&H.__query.length>0&&k.GET("/account/info",{usernames:H.__query},function(n,a){for(var r in a.result)H.cache[r]=a.result[r],e==r&&t(H.cache[r]);H.__query=[]})},50)}},my:function(e,t){k.GET("/account/info",{token:e},function(e,n){e&&"ok"===n.status&&n.result.length>0&&t(n.result[0])})}},D=H,V=(n(44),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).hasError=!1,n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"value",value:function(){return s.a.findDOMNode(this).querySelector("textarea").value}},{key:"error",value:function(){var e=this;if(!this.hasError){this.hasError=!0;var t=s.a.findDOMNode(this).querySelector("textarea");t.className=(this.props.className||"")+" error",setTimeout(function(){t.className=e.props.className||"",e.hasError=!1},500)}}},{key:"onKeyUp",value:function(e){this.props.onKeyUp&&this.props.onKeyUp(e);var t=s.a.findDOMNode(this),n=t.querySelector("textarea"),a=t.querySelector("span");this.props.max?(a.innerText=n.value.length+" ("+this.props.max+")",a.className=this.props.max<n.value.length?"error":""):a.innerText=n.value.length}},{key:"render",value:function(){return r.a.createElement("div",{className:"textarea"},r.a.createElement("textarea",{type:this.props.type,placeholder:this.props.placeholder,name:this.props.name,id:this.props.id,className:this.props.className,onChange:this.props.onChange,onKeyUp:this.onKeyUp.bind(this),defaultValue:this.props.value}),r.a.createElement("span",null,(this.props.value||"").length+(this.props.max?" ("+this.props.max+")":"")))}}]),t}(r.a.Component)),B=(n(45),[{string:["\u0433\u043e\u0434","\u0433\u043e\u0434\u0430","\u0433\u043e\u0434\u0430","\u0433\u043e\u0434\u0430","\u043b\u0435\u0442"],value:31536e6},{string:["\u043c\u0435\u0441\u044f\u0446","\u043c\u0435\u0441\u044f\u0446\u0430","\u043c\u0435\u0441\u044f\u0446\u0430","\u043c\u0435\u0441\u044f\u0446\u0430","\u043c\u0435\u0441\u044f\u0446\u0435\u0432"],value:2592e6},{string:["\u0434\u0435\u043d\u044c","\u0434\u043d\u044f","\u0434\u043d\u044f","\u0434\u043d\u044f","\u0434\u043d\u0435\u0439"],value:864e5},{string:["\u0447\u0430\u0441","\u0447\u0430\u0441\u0430","\u0447\u0430\u0441\u0430","\u0447\u0430\u0441\u0430","\u0447\u0430\u0441\u043e\u0432"],value:36e5},{string:["\u043c\u0438\u043d\u0443\u0442\u0443","\u043c\u0438\u043d\u0443\u0442\u044b","\u043c\u0438\u043d\u0443\u0442\u044b","\u043c\u0438\u043d\u0443\u0442\u044b","\u043c\u0438\u043d\u0443\u0442"],value:6e4},{string:["\u0441\u0435\u043a\u0443\u043d\u0434\u0443","\u0441\u0435\u043a\u0443\u043d\u0434\u044b","\u0441\u0435\u043a\u0443\u043d\u0434\u044b","\u0441\u0435\u043a\u0443\u043d\u0434\u044b","\u0441\u0435\u043a\u0443\u043d\u0434"],value:1e3}]);function K(e){if(e<20)return e;var t=e%10;return(e-t)/10%10>=2&&t>0?t:e}var F=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).submitButton=r.a.createRef(),n.aboutInput=r.a.createRef(),n.emailInput=r.a.createRef(),n.state={loading:!0,info:null},n._ismounted=!1;var a=function(){return n.forceUpdate()};return R.on("checking",a),R.on("checked",a),D.my(R.token,function(e){var t={loading:!1,info:e};n._ismounted?n.setState(t):n.state=t}),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this._ismounted=!0}},{key:"componentWillUnmount",value:function(){this._ismounted=!1}},{key:"handleLogout",value:function(){R.logout()}},{key:"handleEdit",value:function(){var e=this,t=this.emailInput.current.value(),n=this.aboutInput.current.value();t.length>0&&!R.EMAIL_REGEX.test(t)?this.emailInput.current.error():n.length>250?this.aboutInput.current.error():R.edit(t,n,function(){var a=e.state.info;a.email=t,a.about=n,e.setState({info:a}),e.update()})}},{key:"handleImageUpload",value:function(e){var t=this;e.persist();var n=e.target.files[0];"object"===typeof n&&R.uploadImage(n,function(e,n){if(e&&"ok"==n.status){var a=t.state.info;a.image=n,t.setState({imaget:Date.now(),info:a})}else alert(n.errText)})}},{key:"update",value:function(){this.submitButton.current.setState({disabled:this.aboutInput.current.value()==this.state.info.about&&this.emailInput.current.value()==this.state.info.email})}},{key:"getTimeString",value:function(){for(var e,t,n,a="",r=Date.now()-this.state.info["registration-time"],i=0;i<B.length;++i){var s=Math.floor(r/B[i].value);s<1||(a+=s+" "+B[i].string[(e=K(s),t=1,n=B[i].string.length,Math.min(Math.max(e,t),n)-1)]+" ",r-=s*B[i].value)}return a}},{key:"render",value:function(){if(!R.loading&&(!R.verified||!R.token))return r.a.createElement(l.a,{to:"/login/"});if(R.loading||this.state.loading)return r.a.createElement(E,null);var e=this.timeString||(this.timeString=this.getTimeString());return r.a.createElement("div",{id:"my-account-wrapper"},r.a.createElement("div",{id:"my-account"},r.a.createElement("span",{id:"user-image",style:{backgroundImage:"url("+this.state.info.image[128]+(this.state.imaget?"?"+this.state.imaget:"")+")"}},r.a.createElement("span",{className:"upload"}),r.a.createElement("input",{onChange:this.handleImageUpload.bind(this),type:"file",accept:".png,.jpg,.jpeg,.gif"})),r.a.createElement("div",{id:"user-info"},r.a.createElement("h1",null,this.state.info.username),r.a.createElement("p",{id:"user-time"},"\u0432 bodjo \u0443\u0436\u0435 ",e),r.a.createElement("br",null),r.a.createElement(L,{ref:this.emailInput,onKeyUp:this.update.bind(this),onChange:this.update.bind(this),type:"text",placeholder:"\u042d\u043b. \u0430\u0434\u0440\u0435\u0441",value:this.state.info.email}),r.a.createElement(V,{ref:this.aboutInput,onKeyUp:this.update.bind(this),onChange:this.update.bind(this),type:"text",placeholder:"\u041e \u0441\u0435\u0431\u0435",value:this.state.info.about,max:250}),r.a.createElement("br",null),r.a.createElement(g,{disabled:!0,ref:this.submitButton,enter:!0,onClick:this.handleEdit.bind(this)},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),r.a.createElement("span",{className:"space"}),r.a.createElement(g,{invert:!0,onClick:this.handleLogout},"\u0412\u044b\u0439\u0442\u0438"))))}}]),t}(r.a.Component),J=(n(46),function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"news"},r.a.createElement("b",null,window.randomFace()),r.a.createElement("p",null,"\u043d\u0443, \u0441\u043a\u043e\u0440\u043e \u0431\u0443\u0434\u0435\u0442..."))}}]),t}(r.a.Component)),W=(n(47),function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"scoreboard"},r.a.createElement("b",null,window.randomFace()),r.a.createElement("p",null,"\u043f\u043e\u043a\u0430 \u043d\u0435\u0442\u0443"))}}]),t}(r.a.Component)),X=(n(48),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={loading:!0,info:null},D.load(n.props.username,function(e){n.setState({loading:!1,info:e})}),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"user"+(this.state.loading?" loading":"")},r.a.createElement("span",{className:"image",style:{backgroundImage:this.state.info?"url("+this.state.info.image[64]+")":""}}),this.props.me?r.a.createElement(v,{to:"/my-account/",className:"username"},this.props.username):r.a.createElement("span",{className:"username"},this.props.username))}}]),t}(r.a.Component)),Q=function(e){function t(e){var n;Object(c.a)(this,t),n=Object(d.a)(this,Object(h.a)(t).call(this,e));var a=function(){return n.forceUpdate()};return R.on("checking",a),R.on("checked",a),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return R.loading?r.a.createElement(E,null):R.token&&R.username&&R.verified?r.a.createElement(X,{me:!0,username:R.username}):r.a.createElement("div",null,r.a.createElement(v,{to:"/login/"},"\u0432\u043e\u0439\u0442\u0438")," ",r.a.createElement("span",null,"/")," ",r.a.createElement(v,{to:"/register/"},"\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))}}]),t}(r.a.Component);n(49);function z(){return r.a.createElement("div",{id:"header"},r.a.createElement("div",{id:"title"},"bodjo",r.a.createElement(v,{className:"version",to:"https://pages.bodjo.net/#main.devstatus.ru"},"v2.0")),r.a.createElement("div",{id:"auth"},r.a.createElement(Q,null)),r.a.createElement("div",{id:"menu"},r.a.createElement(v,{to:"/"},"\u0433\u043b\u0430\u0432\u043d\u0430\u044f"),r.a.createElement(v,{to:"/news/"},"\u043d\u043e\u0432\u043e\u0441\u0442\u0438"),r.a.createElement(v,{to:"/scoreboard/"},"\u0442\u0430\u0431\u043b\u0438\u0446\u0430")))}n(50);function $(){return r.a.createElement("div",{id:"footer"},r.a.createElement("div",{className:"contacts"},"Telegram: ",r.a.createElement("a",{href:"https://t.me/dkaraush"},"@dkaraush"),r.a.createElement("br",null),"E-mail: ",r.a.createElement("a",{href:"mailto://dkaraush@gmail.com"},"dkaraush@gmail.com")),r.a.createElement("div",{className:"love"},r.a.createElement("p",null,"made with <3 & React")))}var Z=function(){return r.a.createElement(o.a,null,r.a.createElement(z,null),r.a.createElement("div",{id:"main"},r.a.createElement(l.b,{path:"/",exact:!0,component:P}),r.a.createElement(l.b,{path:"/news/",component:J}),r.a.createElement(l.b,{path:"/scoreboard/",component:W}),r.a.createElement(l.b,{path:"/login/",component:q}),r.a.createElement(l.b,{path:"/register/",component:G}),r.a.createElement(l.b,{path:"/my-account/",component:F})),r.a.createElement($,null))};n(51);s.a.render(r.a.createElement(Z,null),document.getElementById("root"))}]),[[25,1,2]]]);
//# sourceMappingURL=main.efe294eb.chunk.js.map